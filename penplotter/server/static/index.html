<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>PenPlotter Control</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <header>
    <h1>PenPlotter Control</h1>
    <div class="actions">
      <button id="refreshPreview">Refresh Preview</button>
      <button id="startJob">Start Job</button>
      <button id="stopJob" class="secondary">Stop Job</button>
    </div>
  </header>
  <main>
    <section class="preview">
      <canvas id="previewCanvas" width="600" height="400"></canvas>
      <div class="preview-info">
        <p><strong>Pattern:</strong> <span id="patternInfo">–</span></p>
        <p><strong>Job:</strong> <span id="jobInfo">idle</span></p>
        <p><strong>Device:</strong> <span id="deviceInfo">–</span></p>
      </div>
    </section>
    <section class="controls">
      <h2>Manual Controls</h2>
      <div class="control-grid">
        <label>X:<input type="number" id="gotoX" step="1" value="0" /></label>
        <label>Y:<input type="number" id="gotoY" step="1" value="0" /></label>
        <button id="gotoBtn">Goto</button>

        <label>Jog ΔX:<input type="number" id="jogDx" step="1" value="5" /></label>
        <label>Jog ΔY:<input type="number" id="jogDy" step="1" value="0" /></label>
        <button id="jogBtn">Jog</button>

        <label>Pen Height:<input type="number" id="penPos" step="0.05" value="1.0" min="0" max="1" /></label>
        <button id="penSet">Set Pen</button>
        <div class="button-row">
          <button id="penUp">Pen Up</button>
          <button id="penDown">Pen Down</button>
          <button id="origin">Set Origin Here</button>
        </div>
      </div>
    </section>
    <section class="pattern-upload">
      <h2>Send Pattern</h2>
      <p>Paste the JSON representation of a pattern generated from a script or notebook and click <em>Upload</em>.</p>
      <textarea id="patternInput" rows="10" spellcheck="false" placeholder='{"items": [...]}'></textarea>
      <div class="upload-actions">
        <button id="uploadPattern">Upload</button>
        <button id="clearPattern" class="secondary">Clear Pattern</button>
      </div>
    </section>
    <section class="log">
      <h2>Status Log</h2>
      <pre id="statusLog"></pre>
    </section>
  </main>
  <script src="/static/main.js" type="module"></script>
</body>
</html>
